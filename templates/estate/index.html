{% extends 'base.html' %}


{% load static %}
{% load humanize %}

{% block extra_head %}
{% if featured_properties %}
{% with featured_properties|first as hero_prop %}
<link rel="preload" as="image"
  href="{% if hero_prop.featured_image %}{{ hero_prop.featured_image.url }}{% else %}{% static 'assets/img/real-estate/property-exterior-3.webp' %}{% endif %}">
{% endwith %}
{% else %}
<link rel="preload" as="image" href="{% static 'assets/img/real-estate/property-exterior-3.webp' %}">
{% endif %}
{% endblock %}


{% block content %}



<main class="main">

  <!-- Hero Section -->
  <section id="hero" class="hero section">

    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="hero-content">
        <div class="row align-items-center">

          <div class="col-lg-6 hero-text" data-aos="fade-right" data-aos-delay="200">
            <div class="hero-badge">
              <i class="bi bi-star-fill"></i>
              <span>Premium Properties</span>
            </div>
            <h1>Discover Your Perfect Home in the Heart of the City</h1>
            <p>Experience seamless property search with Nigeria's most trusted real estate platform. From modern
              apartments to luxury estates, find your dream property with verified listings from certified agents across
              major cities.</p>

            <div class="search-form" data-aos="fade-up" data-aos-delay="300">
              <form action="{% url 'search_properties' %}" method="get">
                <div class="row g-3">

                  <!-- State Selection -->
                  <div class="col-md-6">
                    <div class="form-floating">
                      <select class="form-select" id="state-type" name="state_type" required>
                        <option value="">Select State</option>
                        {% for state in states %}
                        <option value="{{ state.id }}">{{ state.name }}</option>
                        {% endfor %}
                      </select>
                      <label for="state-type">State</label>
                    </div>
                  </div>

                  <!-- City Selection (Dynamically populated) -->
                  <div class="col-md-6">
                    <div class="form-floating">
                      <select class="form-select" id="cities-type" name="city_type" required disabled>
                        <option value="">Select State First</option>
                      </select>
                      <label for="cities-type">City</label>
                    </div>
                  </div>

                  <!-- Property Type -->
                  <div class="col-md-6">
                    <div class="form-floating">
                      <select class="form-select" id="property-type" name="property_type">
                        <option value="">Select Type</option>
                        <option value="house">House</option>
                        <option value="apartment">Apartment</option>
                        <option value="condo">Condo</option>
                        <option value="townhouse">Townhouse</option>
                        <option value="land">Land</option>
                        <option value="duplex">Duplex</option>
                        <option value="bungalow">Bungalow</option>
                      </select>
                      <label for="property-type">Property Type</label>
                    </div>
                  </div>

                  <!-- Price Range -->
                  <div class="col-md-6">
                    <div class="form-floating">
                      <select class="form-select" id="price-range" name="price_range">
                        <option value="">Price Range</option>
                        <option value="0-5000000">Under ₦5M</option>
                        <option value="5000000-10000000">₦5M - ₦10M</option>
                        <option value="10000000-20000000">₦10M - ₦20M</option>
                        <option value="20000000-50000000">₦20M - ₦50M</option>
                        <option value="50000000+">Above ₦50M</option>
                      </select>
                      <label for="price-range">Price Range</label>
                    </div>
                  </div>

                  <!-- Bedrooms -->
                  <div class="col-md-6">
                    <div class="form-floating">
                      <select class="form-select" id="bedrooms" name="bedrooms">
                        <option value="">Bedrooms</option>
                        <option value="1">1 Bedroom</option>
                        <option value="2">2 Bedrooms</option>
                        <option value="3">3 Bedrooms</option>
                        <option value="4">4 Bedrooms</option>
                        <option value="5+">5+ Bedrooms</option>
                      </select>
                      <label for="bedrooms">Bedrooms</label>
                    </div>
                  </div>

                  <!-- Bathrooms -->
                  <div class="col-md-6">
                    <div class="form-floating">
                      <select class="form-select" id="bathrooms" name="bathrooms">
                        <option value="">Bathrooms</option>
                        <option value="1">1 Bathroom</option>
                        <option value="2">2 Bathrooms</option>
                        <option value="3">3 Bathrooms</option>
                        <option value="4+">4+ Bathrooms</option>
                      </select>
                      <label for="bathrooms">Bathrooms</label>
                    </div>
                  </div>

                  <!-- Search Button -->
                  <div class="col-12">
                    <button type="submit" class="btn btn-search w-100">
                      <i class="bi bi-search"></i>
                      Search Properties
                    </button>
                  </div>
                </div>
              </form>
            </div>



            <div class="hero-stats" data-aos="fade-up" data-aos-delay="400">
              <div class="row">
                <div class="col-4">
                  <div class="stat-item">
                    <h3><span data-purecounter-start="0" data-purecounter-end="2847" data-purecounter-duration="1"
                        class="purecounter"></span>+</h3>
                    <p>Properties Listed</p>
                  </div>
                </div>
                <div class="col-4">
                  <div class="stat-item">
                    <h3><span data-purecounter-start="0" data-purecounter-end="156" data-purecounter-duration="1"
                        class="purecounter"></span>+</h3>
                    <p>Verified Agents</p>
                  </div>
                </div>
                <div class="col-4">
                  <div class="stat-item">
                    <h3><span data-purecounter-start="0" data-purecounter-end="98" data-purecounter-duration="1"
                        class="purecounter"></span>%</h3>
                    <p>Client Satisfaction</p>
                  </div>
                </div>
              </div>
            </div>

          </div><!-- End Hero Text -->

          <div class="col-lg-6 hero-images" data-aos="fade-left" data-aos-delay="400">
            <div class="image-stack">
              <div class="main-image">
                {% if featured_properties %}
                {% with featured_properties|first as hero_prop %}
                <img
                  src="{% if hero_prop.featured_image %}{{ hero_prop.featured_image.url }}{% else %}{% static 'assets/img/real-estate/property-exterior-3.webp' %}{% endif %}"
                  alt="{{ hero_prop.title }}" class="img-fluid" fetchpriority="high">
                <div class="property-tag">
                  <span class="price">{{ hero_prop.formatted_price }}</span>
                  <span class="type">{% if hero_prop.is_featured %}Featured{% elif hero_prop.is_premium %}Premium{% else
                    %}Prime{% endif %}</span>
                </div>
                {% endwith %}
                {% else %}
                <img src="{% static 'assets/img/real-estate/property-exterior-3.webp' %}" alt="Luxury Property"
                  class="img-fluid" fetchpriority="high">
                <div class="property-tag">
                  <span class="price">$850,000</span>
                  <span class="type">Featured</span>
                </div>
                {% endif %}
              </div>

              <div class="secondary-image">
                <img src="{% static 'assets/img/real-estate/property-interior-7.webp' %}" alt="Property Interior"
                  class="img-fluid">
              </div>

              <div class="floating-card">
                <div class="agent-info">
                  <img src="{% static 'assets/img/real-estate/agent-4.webp' %}" alt="Agent" class="agent-avatar">
                  <div class="agent-details">
                    <h5>Sarah Johnson</h5>
                    <p>Top Real Estate Agent</p>
                    <div class="rating">
                      <i class="bi bi-star-fill"></i>
                      <i class="bi bi-star-fill"></i>
                      <i class="bi bi-star-fill"></i>
                      <i class="bi bi-star-fill"></i>
                      <i class="bi bi-star-fill"></i>
                      <span>4.9 (127 reviews)</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div><!-- End Hero Images -->

        </div>
      </div>

    </div>

  </section><!-- /Hero Section -->

  <!-- Home About Section -->
  <section id="home-about" class="home-about section">

    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="row align-items-center gy-5">

        <div class="col-lg-6 order-lg-2" data-aos="fade-left" data-aos-delay="200">
          <div class="image-section">
            <div class="main-image-wrapper">
              <img src="{% static 'assets/img/real-estate/property-exterior-7.webp' %}" alt="Premium Property"
                class="img-fluid main-image">
              <div class="floating-card">
                <div class="card-content">
                  <div class="icon">
                    <i class="bi bi-award"></i>
                  </div>
                  <div class="text">
                    <span class="number"><span data-purecounter-start="0" data-purecounter-end="12"
                        data-purecounter-duration="1" class="purecounter"></span>+</span>
                    <span class="label">Awards Won</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="secondary-images">
              <div class="small-image">
                <img src="{% static 'assets/img/real-estate/property-interior-8.webp' %}" alt="Interior Design"
                  class="img-fluid">
              </div>
              <div class="small-image">
                <img src="{% static 'assets/img/real-estate/agent-3.webp' %}" alt="Expert Agent" class="img-fluid">
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-6 order-lg-1" data-aos="fade-right" data-aos-delay="300">
          <div class="content-wrapper">
            <div class="section-badge">
              <i class="bi bi-buildings"></i>
              <span>Premium Real Estate</span>
            </div>

            <h2>Transforming Real Estate Dreams Into Reality</h2>

            <p>At Nestova, we believe that finding a home is more than just a transaction; it's about discovering a
              space where memories are made and futures are built. Our platform connects you with the most exclusive and
              verified listings in Nigeria's prime locations.
            </p>

            <div class="stats-grid">
              <div class="stat-item" data-aos="zoom-in" data-aos-delay="400">
                <div class="stat-number">
                  <span data-purecounter-start="0" data-purecounter-end="2800" data-purecounter-duration="2"
                    class="purecounter"></span>+
                </div>
                <div class="stat-label">Properties Listed</div>
              </div>

              <div class="stat-item" data-aos="zoom-in" data-aos-delay="450">
                <div class="stat-number">
                  <span data-purecounter-start="0" data-purecounter-end="95" data-purecounter-duration="1"
                    class="purecounter"></span>%
                </div>
                <div class="stat-label">Success Rate</div>
              </div>

              <div class="stat-item" data-aos="zoom-in" data-aos-delay="500">
                <div class="stat-number">
                  <span data-purecounter-start="0" data-purecounter-end="24" data-purecounter-duration="1"
                    class="purecounter"></span>/7
                </div>
                <div class="stat-label">Client Support</div>
              </div>
            </div>

            <div class="features-list">
              <div class="feature-item">
                <i class="bi bi-check-circle"></i>
                <span>Expert market analysis and pricing strategies</span>
              </div>
              <div class="feature-item">
                <i class="bi bi-check-circle"></i>
                <span>Personalized property matching services</span>
              </div>
              <div class="feature-item">
                <i class="bi bi-check-circle"></i>
                <span>Professional photography and virtual tours</span>
              </div>
            </div>

            <div class="cta-wrapper">
              <a href="about.html" class="btn-primary">
                <span>Learn More About Us</span>
                <i class="bi bi-arrow-right-circle"></i>
              </a>
              <div class="contact-quick">
                <i class="bi bi-headset"></i>
                <div class="contact-text">
                  <span>Need assistance?</span>
                  <a href="tel:+15559876543">+1 (555) 987-6543</a>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>

  </section><!-- /Home About Section -->

  <!-- Featured Properties Section -->
  <section id="featured-properties" class="featured-properties section">

    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
      <h2>Featured Properties</h2>
      <p>Discover our handpicked selection of premium properties in prime locations</p>
    </div><!-- End Section Title -->

    <div class="container" data-aos="fade-up" data-aos-delay="100">

      {% if featured_properties %}
      <div class="grid-featured" data-aos="zoom-in" data-aos-delay="150">

        {% with featured_properties|first as main_property %}
        <article class="highlight-card">
          <div class="media">
            <div class="badge-set">
              {% if main_property.is_featured %}
              <span class="flag featured">Featured</span>
              {% endif %}
              {% if main_property.is_premium %}
              <span class="flag premium">Premium</span>
              {% endif %}
              {% if main_property.is_hot %}
              <span class="flag hot">Hot</span>
              {% endif %}
              {% if main_property.is_new %}
              <span class="flag new">New</span>
              {% endif %}
            </div>
            <a href="{{ main_property.get_absolute_url }}" class="image-link">
              <img
                src="{% if main_property.featured_image %}{{ main_property.featured_image.url }}{% else %}{% static 'assets/img/real-estate/property-exterior-6.webp' %}{% endif %}"
                alt="{{ main_property.title }}" class="img-fluid">
            </a>
            <div class="quick-specs">
              <span><i class="bi bi-door-open"></i> {{ main_property.bedrooms }} Bed{{ main_property.bedrooms|pluralize }}</span>
              <span><i class="bi bi-droplet"></i> {{ main_property.bathrooms }} Bath{{ main_property.bathrooms|pluralize }}</span>
              <span><i class="bi bi-aspect-ratio"></i> {{ main_property.square_feet|floatformat:0|intcomma }} sq
                ft</span>
            </div>
          </div>
          <div class="content">
            <div class="top">
              <div>
                <h3><a href="{{ main_property.get_absolute_url }}">{{ main_property.title }}</a></h3>
                <div class="loc"><i class="bi bi-geo-alt-fill"></i> {{ main_property.city.name }}, {{ main_property.state.name }}</div>
              </div>
              <div class="price">{{ main_property.formatted_price }}</div>
            </div>
            <p class="excerpt">{{ main_property.description|striptags|truncatewords:20 }}</p>
            <div class="cta">
              <a href="{{ main_property.get_absolute_url }}" class="btn-main">View Details</a>
              <a href="{{ main_property.get_absolute_url }}" class="btn-soft">More Photos</a>
              <div class="meta">
                <span class="status {{ main_property.status.name }}">{{ main_property.status }}</span>
                <span class="listed">Listed {{ main_property.get_days_listed }} day{{ main_property.get_days_listed|pluralize }} ago</span>
              </div>
            </div>
          </div>
        </article><!-- End Highlight Card -->
        {% endwith %}

        <div class="mini-list">

          {% for property in featured_properties|slice:"1:4" %}
          <article class="mini-card" data-aos="fade-up" data-aos-delay="{% cycle '200' '250' '300' %}">
            <a href="{{ property.get_absolute_url }}" class="thumb">
              <img
                src="{% if property.featured_image %}{{ property.featured_image.url }}{% else %}{% static 'assets/img/real-estate/property-interior-2.webp' %}{% endif %}"
                alt="{{ property.title }}" class="img-fluid" loading="lazy">
              {% if property.is_hot %}
              <span class="label hot"><i class="bi bi-lightning-charge-fill"></i> Hot</span>
              {% elif property.is_new %}
              <span class="label new"><i class="bi bi-star-fill"></i> New</span>
              {% elif property.is_featured %}
              <span class="label featured"><i class="bi bi-gem"></i> Featured</span>
              {% elif property.is_exclusive %}
              <span class="label exclusive"><i class="bi bi-award"></i> Exclusive</span>
              {% endif %}
            </a>
            <div class="mini-body">
              <h4><a href="{{ property.get_absolute_url }}">{{ property.title|truncatewords:6 }}</a></h4>
              <div class="mini-loc"><i class="bi bi-geo"></i> {{ property.city.name }}, {{ property.state.code }}</div>
              <div class="mini-specs">
                <span><i class="bi bi-door-open"></i> {{ property.bedrooms }}</span>
                <span><i class="bi bi-droplet"></i> {{ property.bathrooms }}</span>
                <span><i class="bi bi-rulers"></i> {{ property.square_feet|floatformat:0|intcomma }} sq ft</span>
              </div>
              <div class="mini-foot">
                <div class="mini-price">{{ property.formatted_price }}</div>
                <a href="{{ property.get_absolute_url }}" class="mini-btn">Details</a>
              </div>
            </div>
          </article><!-- End Mini Card -->
          {% endfor %}

        </div><!-- End Mini List -->

      </div>

      <div class="row gy-4 mt-4">

        {% for property in featured_properties|slice:"4:7" %}
        <div class="col-lg-4" data-aos="fade-up" data-aos-delay="{% cycle '300' '350' '400' %}">
          <article class="stack-card">
            <figure class="stack-media">
              <img
                src="{% if property.featured_image %}{{ property.featured_image.url }}{% else %}{% static 'assets/img/real-estate/property-exterior-8.webp' %}{% endif %}"
                alt="{{ property.title }}" class="img-fluid" loading="lazy">
              <figcaption>
                {% if property.is_exclusive %}
                <span class="chip exclusive">Exclusive</span>
                {% elif property.is_hot %}
                <span class="chip hot">Hot</span>
                {% elif property.is_new %}
                <span class="chip new">New</span>
                {% elif property.is_premium %}
                <span class="chip premium">Premium</span>
                {% endif %}
              </figcaption>
            </figure>
            <div class="stack-body">
              <h5><a href="{{ property.get_absolute_url }}">{{ property.title|truncatewords:5 }}</a></h5>
              <div class="stack-loc"><i class="bi bi-geo-alt"></i> {{ property.city.name }}, {{ property.state.code }}
              </div>
              <ul class="stack-specs">
                <li><i class="bi bi-door-open"></i> {{ property.bedrooms }}</li>
                <li><i class="bi bi-droplet"></i> {{ property.bathrooms }}</li>
                <li><i class="bi bi-aspect-ratio"></i> {{ property.square_feet|floatformat:0|intcomma }} sq ft</li>
              </ul>
              <div class="stack-foot">
                <span class="stack-price">{{ property.formatted_price }}</span>
                <a href="{{ property.get_absolute_url }}" class="stack-link">View</a>
              </div>
            </div>
          </article>
        </div>
        {% endfor %}

      </div>
      {% else %}
      <div class="text-center">
        <p>No featured properties available at the moment. Check back soon!</p>
      </div>
      {% endif %}

    </div>

  </section><!-- /Featured Properties Section -->

  <!-- Featured Services Section -->
  <section id="featured-services" class="featured-services section">

    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
      <h2>Our Expertise</h2>
      <p>Comprehensive real estate solutions designed to help you navigate the market with confidence and ease.</p>
    </div><!-- End Section Title -->

    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="row g-4 justify-content-center">

        <div class="col-lg-3 col-md-6" data-aos="zoom-in" data-aos-delay="200">
          <div class="service-card">
            <div class="service-header">
              <div class="service-icon">
                <i class="bi bi-search"></i>
              </div>
              <div class="service-number">01</div>
            </div>
            <div class="service-content">
              <h3><a href="{% url 'service' %}">Property Search</a></h3>
              <p>Utilize our advanced search tools to find properties that perfectly match your lifestyle, location
                preferences, and budget across Nigeria's major cities.</p>
              <ul class="service-features">
                <li><i class="bi bi-check2"></i> Advanced Search Filters</li>
                <li><i class="bi bi-check2"></i> 360° Virtual Tours</li>
                <li><i class="bi bi-check2"></i> Real-time Updates</li>
              </ul>
            </div>
            <div class="service-action">
              <a href="{% url 'service' %}" class="service-btn">
                <span>Explore Properties</span>
                <i class="bi bi-arrow-right"></i>
              </a>
            </div>
          </div>
        </div><!-- End Service Item -->

        <div class="col-lg-3 col-md-6" data-aos="zoom-in" data-aos-delay="300">
          <div class="service-card featured">
            <div class="service-header">
              <div class="service-icon">
                <i class="bi bi-graph-up"></i>
              </div>
              <div class="service-number">02</div>
            </div>
            <div class="service-content">
              <h3><a href="{% url 'service' %}">Market Analysis</a></h3>
              <p>Stay ahead of market trends with our data-driven insights. We provide professional valuations and
                inventory analysis to help you make informed investment decisions.</p>
              <ul class="service-features">
                <li><i class="bi bi-check2"></i> Price Trend Reports</li>
                <li><i class="bi bi-check2"></i> Investment Insights</li>
                <li><i class="bi bi-check2"></i> Market Forecasting</li>
              </ul>
            </div>
            <div class="service-action">
              <a href="{% url 'service' %}" class="service-btn">
                <span>Get Analysis</span>
                <i class="bi bi-arrow-right"></i>
              </a>
            </div>
          </div>
        </div><!-- End Service Item -->

        <div class="col-lg-3 col-md-6" data-aos="zoom-in" data-aos-delay="400">
          <div class="service-card">
            <div class="service-header">
              <div class="service-icon">
                <i class="bi bi-key"></i>
              </div>
              <div class="service-number">03</div>
            </div>
            <div class="service-content">
              <h3><a href="{% url 'service' %}">Property Management</a></h3>
              <p>Maximize your property's value with our end-to-end management services, including tenant vetting,
                maintenance, and seamless rent collection processes.</p>
              <ul class="service-features">
                <li><i class="bi bi-check2"></i> Tenant Screening</li>
                <li><i class="bi bi-check2"></i> Rental Collection</li>
                <li><i class="bi bi-check2"></i> Maintenance Services</li>
              </ul>
            </div>
            <div class="service-action">
              <a href="{% url 'service' %}" class="service-btn">
                <span>Manage Now</span>
                <i class="bi bi-arrow-right"></i>
              </a>
            </div>
          </div>
        </div><!-- End Service Item -->

        <div class="col-lg-3 col-md-6" data-aos="zoom-in" data-aos-delay="500">
          <div class="service-card">
            <div class="service-header">
              <div class="service-icon">
                <i class="bi bi-shield-check"></i>
              </div>
              <div class="service-number">04</div>
            </div>
            <div class="service-content">
              <h3><a href="{% url 'service' %}">Legal Support</a></h3>
              <p>Navigate the complexities of real estate documentation with our legal experts, ensuring all your
                transactions are secure, transparent, and fully compliant.</p>
              <ul class="service-features">
                <li><i class="bi bi-check2"></i> Contract Review</li>
                <li><i class="bi bi-check2"></i> Title Verification</li>
                <li><i class="bi bi-check2"></i> Legal Documentation</li>
              </ul>
            </div>
            <div class="service-action">
              <a href="{% url 'service' %}" class="service-btn" aria-label="Learn more about Legal Support">
                <span>Learn More</span>
                <i class="bi bi-arrow-right"></i>
              </a>
            </div>
          </div>
        </div><!-- End Service Item -->

      </div>

      <div class="text-center" data-aos="fade-up" data-aos-delay="600">
        <a href="services.html" class="btn-all-services">
          <span>Discover All Our Services</span>
          <i class="bi bi-arrow-up-right"></i>
        </a>
      </div>

    </div>

  </section><!-- /Featured Services Section -->
  {% load humanize %}

  <section id="pricing-packages" class="featured-services section">

    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
      <h2>Sell Your Properties With Us</h2>
      <p>Choose the perfect package to post your properties and reach potential buyers</p>
    </div><!-- End Section Title -->

    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="row g-4 justify-content-center">

        {% if pricing_packages %}
        {% for pkg in pricing_packages %}
        <div class="col-lg-3 col-md-6" data-aos="zoom-in" data-aos-delay="{% cycle '200' '300' '400' '500' %}">
          <div class="service-card {% if pkg.slots_count == 10 %}featured{% endif %}">
            <div class="service-header">
              <div class="service-icon">
                <i class="bi bi-building"></i>
              </div>
              <div class="service-number">{{ pkg.slots_count }}</div>
            </div>
            <div class="service-content">
              <h3><a href="{% url 'listings:subscribe' pkg.id %}">{{ pkg.name }}</a></h3>
              <p>{{ pkg.description|default:"Post your properties and connect with buyers instantly" }}</p>
              <ul class="service-features">
                <li><i class="bi bi-check2"></i> {{ pkg.slots_count }} Property Slot{{ pkg.slots_count|pluralize }}</li>
                <li><i class="bi bi-check2"></i> Never Expires</li>
                <li><i class="bi bi-check2"></i> Dashboard Management</li>
                {% if pkg.slots_count >= 10 %}
                <li><i class="bi bi-star-fill"></i> Priority Support</li>
                {% endif %}
              </ul>
            </div>
            <div class="service-action">
              {% if pkg.price == 0 %}
              <span class="service-price">Free</span>
              {% else %}
              <span class="service-price">₦{{ pkg.price|floatformat:0|intcomma}}</span>
              {% endif %}
              <form method="post" action="{% url "listings:subscribe" pkg.id %}">
                {% csrf_token %}
                <a href="{% url 'listings:subscribe' pkg.id %}" class="service-btn">
                  <span>Get Package</span>
                  <i class="bi bi-arrow-right"></i>
                </a>
              </form>

            </div>
          </div>
        </div><!-- End Service Item -->
        {% endfor %}
        {% else %}
        <!-- Fallback if no packages -->
        <div class="col-12 text-center">
          <p>No pricing packages available at the moment. Please check back later.</p>
        </div>
        {% endif %}

      </div>

      <div class="text-center" data-aos="fade-up" data-aos-delay="600">
        <a href="{% url 'listings:pricing' %}" class="btn-all-services">
          <span>View All Pricing Plans</span>
          <i class="bi bi-arrow-up-right"></i>
        </a>
      </div>

    </div>

  </section><!-- /Pricing Packages Section -->
  <!-- Featured Agents Section -->
  <section id="featured-agents" class="featured-agents section">

    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
      <h2>Our Trusted Agents</h2>
      <p>Work with the industry's most dedicated professionals who are committed to your success and satisfaction.</p>
    </div><!-- End Section Title -->

    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="row gy-5 justify-content-center">

        <div class="col-lg-6 col-xl-4" data-aos="fade-up" data-aos-delay="100">
          <div class="agent-card">
            <div class="agent-image">
              <img src="{% static 'assets/img/real-estate/agent-5.webp' %}" alt="Top Agent" class="img-fluid">
              <div class="agent-overlay">
                <div class="contact-buttons">
                  <a href="tel:+14159876543" class="btn-contact" title="Call Agent">
                    <i class="bi bi-telephone"></i>
                  </a>
                  <a href="mailto:lisa.thompson@example.com" class="btn-contact" title="Email Agent">
                    <i class="bi bi-envelope"></i>
                  </a>
                  <a href="#" class="btn-contact" title="WhatsApp">
                    <i class="bi bi-whatsapp"></i>
                  </a>
                </div>
              </div>
              <div class="status-badge top-agent">Top Agent</div>
            </div>
            <div class="agent-info">
              <div class="agent-meta">
                <h3 class="agent-name">Lisa Thompson</h3>
                <p class="agent-title">Luxury Property Expert</p>
              </div>
              <div class="agent-stats">
                <div class="stat-item">
                  <span class="stat-number">150+</span>
                  <span class="stat-label">Properties Sold</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                  <span class="stat-number">4.9</span>
                  <span class="stat-label">Rating</span>
                </div>
              </div>
              <div class="location-tag">
                <i class="bi bi-geo-alt"></i>
                <span>Miami Beach</span>
              </div>
              <div class="specialties">
                <span class="specialty-tag">Waterfront</span>
                <span class="specialty-tag">High-Rise</span>
              </div>
              <a href="agent-profile.html" class="profile-link">View Full Profile</a>
            </div>
          </div>
        </div><!-- End Agent Card -->

        <div class="col-lg-6 col-xl-4" data-aos="fade-up" data-aos-delay="200">
          <div class="agent-card">
            <div class="agent-image">
              <img src="{% static 'assets/img/real-estate/agent-4.webp' %}" alt="Top Agent" class="img-fluid">
              <div class="agent-overlay">
                <div class="contact-buttons">
                  <a href="tel:+14159876544" class="btn-contact" title="Call Agent">
                    <i class="bi bi-telephone"></i>
                  </a>
                  <a href="mailto:robert.chen@example.com" class="btn-contact" title="Email Agent">
                    <i class="bi bi-envelope"></i>
                  </a>
                  <a href="#" class="btn-contact" title="WhatsApp">
                    <i class="bi bi-whatsapp"></i>
                  </a>
                </div>
              </div>
              <div class="status-badge certified">Certified</div>
            </div>
            <div class="agent-info">
              <div class="agent-meta">
                <h3 class="agent-name">Robert Chen</h3>
                <p class="agent-title">Commercial Specialist</p>
              </div>
              <div class="agent-stats">
                <div class="stat-item">
                  <span class="stat-number">90+</span>
                  <span class="stat-label">Commercial Sales</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                  <span class="stat-number">4.8</span>
                  <span class="stat-label">Rating</span>
                </div>
              </div>
              <div class="location-tag">
                <i class="bi bi-geo-alt"></i>
                <span>Downtown</span>
              </div>
              <div class="specialties">
                <span class="specialty-tag">Office Space</span>
                <span class="specialty-tag">Retail</span>
              </div>
              <a href="agent-profile.html" class="profile-link">View Full Profile</a>
            </div>
          </div>
        </div><!-- End Agent Card -->

        <div class="col-lg-6 col-xl-4" data-aos="fade-up" data-aos-delay="300">
          <div class="agent-card">
            <div class="agent-image">
              <img src="{% static 'assets/img/real-estate/agent-8.webp' %}" alt="Top Agent" class="img-fluid">
              <div class="agent-overlay">
                <div class="contact-buttons">
                  <a href="tel:+14159876545" class="btn-contact" title="Call Agent">
                    <i class="bi bi-telephone"></i>
                  </a>
                  <a href="mailto:maria.gonzalez@example.com" class="btn-contact" title="Email Agent">
                    <i class="bi bi-envelope"></i>
                  </a>
                  <a href="#" class="btn-contact" title="WhatsApp">
                    <i class="bi bi-whatsapp"></i>
                  </a>
                </div>
              </div>
              <div class="status-badge new-star">Rising Star</div>
            </div>
            <div class="agent-info">
              <div class="agent-meta">
                <h3 class="agent-name">Maria Gonzalez</h3>
                <p class="agent-title">Residential Advisor</p>
              </div>
              <div class="agent-stats">
                <div class="stat-item">
                  <span class="stat-number">75+</span>
                  <span class="stat-label">Happy Families</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                  <span class="stat-number">4.9</span>
                  <span class="stat-label">Rating</span>
                </div>
              </div>
              <div class="location-tag">
                <i class="bi bi-geo-alt"></i>
                <span>Suburbs</span>
              </div>
              <div class="specialties">
                <span class="specialty-tag">Family Homes</span>
                <span class="specialty-tag">First-Time</span>
              </div>
              <a href="agent-profile.html" class="profile-link">View Full Profile</a>
            </div>
          </div>
        </div><!-- End Agent Card -->

      </div>

      <div class="text-center mt-5" data-aos="fade-up" data-aos-delay="400">
        <a href="agents.html" class="explore-agents-btn">
          <span>Explore All Our Agents</span>
          <i class="bi bi-arrow-right-circle"></i>
        </a>
      </div>

    </div>

  </section><!-- /Featured Agents Section -->

  <!-- Testimonials Section -->
  <section id="testimonials" class="testimonials section light-background">

    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
      <h2>What Our Clients Say</h2>
      <p>Hear from the families and investors who have found their perfect properties through Nestova.</p>
    </div><!-- End Section Title -->

    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="testimonials-slider swiper init-swiper">
        <script type="application/json" class="swiper-config">
            {
              "slidesPerView": 1,
              "loop": true,
              "speed": 600,
              "autoplay": {
                "delay": 5000
              },
              "navigation": {
                "nextEl": ".swiper-button-next",
                "prevEl": ".swiper-button-prev"
              }
            }
          </script>

        <div class="swiper-wrapper">

          <div class="swiper-slide">
            <div class="testimonial-item">
              <div class="row">
                <div class="col-lg-8">
                  <h2>A Seamless Relocation Experience</h2>
                  <p>
                    Relocating to Lagos was a daunting prospect until I found Nestova. Their team provided not just
                    listings, but a comprehensive overview of the neighborhoods that suited my lifestyle.
                  </p>
                  <p>
                    The transparency in pricing and the verification of every property gave me the peace of mind I
                    needed. I found a beautiful apartment in Ikoyi that exceeded all my expectations. Highly
                    recommended!
                  </p>
                  <div class="profile d-flex align-items-center">
                    <img src="{% static 'assets/img/person/person-m-7.webp' %}" class="profile-img" alt="">
                    <div class="profile-info">
                      <h3>Saul Goodman</h3>
                      <span>Client</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 d-none d-lg-block">
                  <div class="featured-img-wrapper">
                    <img src="{% static 'assets/img/person/person-m-7.webp' %}" class="featured-img" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div><!-- End Testimonial Item -->

          <div class="swiper-slide">
            <div class="testimonial-item">
              <div class="row">
                <div class="col-lg-8">
                  <h2>Expert Guidance for First-Time Buyers</h2>
                  <p>
                    As a first-time homebuyer in Abuja, I was overwhelmed by the options and paperwork. Nestova's agents
                    walked me through every step, from initial search to final closing.
                  </p>
                  <p>
                    Their dedication to finding a home within my budget without compromising on quality was truly
                    impressive. The virtual tour feature saved me so much time during the initial screening process.
                  </p>
                  <div class="profile d-flex align-items-center">
                    <img src="{% static 'assets/img/person/person-f-8.webp' %}" class="profile-img" alt="">
                    <div class="profile-info">
                      <h3>Sara Wilsson</h3>
                      <span>Designer</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 d-none d-lg-block">
                  <div class="featured-img-wrapper">
                    <img src="{% static 'assets/img/person/person-f-8.webp' %}" class="featured-img" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div><!-- End Testimonial Item -->

          <div class="swiper-slide">
            <div class="testimonial-item">
              <div class="row">
                <div class="col-lg-8">
                  <h2>Strategic Investment Opportunities</h2>
                  <p>
                    I've worked with several real estate platforms, but Nestova's market analysis is unparalleled. They
                    helped me identify high-yield rental properties in emerging areas of Port Harcourt.
                  </p>
                  <p>
                    The professionalism of their management services ensures my investments are well-maintained and
                    profitable. It's a platform built for serious investors.
                  </p>
                  <div class="profile d-flex align-items-center">
                    <img src="{% static 'assets/img/person/person-m-9.webp' %}" class="profile-img" alt="">
                    <div class="profile-info">
                      <h3>Matt Brandon</h3>
                      <span>Freelancer</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 d-none d-lg-block">
                  <div class="featured-img-wrapper">
                    <img src="{% static 'assets/img/person/person-m-9.webp' %}" class="featured-img" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div><!-- End Testimonial Item -->

          <div class="swiper-slide">
            <div class="testimonial-item">
              <div class="row">
                <div class="col-lg-8">
                  <h2>Exceptional Property Management</h2>
                  <p>
                    Managing multiple properties used to be a headache. Since migrating my portfolio to Nestova,
                    everything from tenant vetting to maintenance is handled with absolute professionalism.
                  </p>
                  <p>
                    The automated reporting and seamless payment systems have transformed how I manage my real estate
                    assets. A truly world-class service.
                  </p>
                  <div class="profile d-flex align-items-center">
                    <img src="{% static 'assets/img/person/person-f-10.webp' %}" class="profile-img" alt="">
                    <div class="profile-info">
                      <h3>Jena Karlis</h3>
                      <span>Store Owner</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 d-none d-lg-block">
                  <div class="featured-img-wrapper">
                    <img src="{% static 'assets/img/person/person-f-10.webp' %}" class="featured-img" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div><!-- End Testimonial Item -->

        </div>

        <div class="swiper-navigation w-100 d-flex align-items-center justify-content-center">
          <div class="swiper-button-prev"></div>
          <div class="swiper-button-next"></div>
        </div>

      </div>

    </div>

  </section><!-- /Testimonials Section -->

  <!-- Why Us Section -->
  <section id="why-us" class="why-us section">

    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
      <h2>Why Nestova?</h2>
      <p>Discover why we are the preferred choice for discerning property seekers and investors across Nigeria.</p>
    </div><!-- End Section Title -->

    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="row align-items-center gy-5">

        <div class="col-lg-5" data-aos="fade-right" data-aos-delay="200">
          <div class="image-showcase">
            <div class="main-image-wrapper">
              <img src="{% static 'assets/img/real-estate/property-exterior-3.webp' %}" alt="Premium Property"
                class="img-fluid main-image">
              <div class="image-overlay">
                <a href="" class="glightbox">
                  <div class="overlay-content">
                    <i class="bi bi-play-circle-fill play-icon"></i>
                    <span>Watch Our Story</span>
                  </div>
                </a>
              </div>
            </div>

            <div class="floating-stats">
              <div class="stat-badge">
                <span class="stat-number">15+</span>
                <span class="stat-text">Years Excellence</span>
              </div>
              <div class="stat-badge">
                <span class="stat-number">3.2K</span>
                <span class="stat-text">Happy Clients</span>
              </div>
            </div>

            <div class="experience-card">
              <div class="card-icon">
                <i class="bi bi-gem"></i>
              </div>
              <div class="card-content">
                <h5>Premier Service</h5>
                <p>Luxury real estate expertise since 2009</p>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-7" data-aos="fade-left" data-aos-delay="300">
          <div class="content-wrapper">
            <div class="section-badge">
              <i class="bi bi-star-fill me-2"></i>
              Why Nestova?
            </div>

            <h2>Your Gateway to Exceptional Real Estate Experiences</h2>
            <p class="lead-text">Nestova combines deep local market knowledge with international service standards. We
              provide a secure and transparent marketplace for all your real estate needs.</p>

            <div class="benefits-grid">
              <div class="benefit-item" data-aos="fade-up" data-aos-delay="400">
                <div class="benefit-icon">
                  <i class="bi bi-geo-alt-fill"></i>
                </div>
                <div class="benefit-content">
                  <h4>Prime Locations</h4>
                  <p>Exclusive access to the most sought-after neighborhoods and emerging markets.</p>
                </div>
              </div>

              <div class="benefit-item" data-aos="fade-up" data-aos-delay="450">
                <div class="benefit-icon">
                  <i class="bi bi-shield-fill-check"></i>
                </div>
                <div class="benefit-content">
                  <h4>Guaranteed Results</h4>
                  <p>Our proven track record ensures successful transactions and satisfied clients.</p>
                </div>
              </div>

              <div class="benefit-item" data-aos="fade-up" data-aos-delay="500">
                <div class="benefit-icon">
                  <i class="bi bi-clock-fill"></i>
                </div>
                <div class="benefit-content">
                  <h4>Fast Processing</h4>
                  <p>Streamlined processes and expert negotiation to close deals efficiently.</p>
                </div>
              </div>

              <div class="benefit-item" data-aos="fade-up" data-aos-delay="550">
                <div class="benefit-icon">
                  <i class="bi bi-people-fill"></i>
                </div>
                <div class="benefit-content">
                  <h4>Expert Team</h4>
                  <p>Certified professionals with deep market knowledge and client dedication.</p>
                </div>
              </div>
            </div>

            <div class="achievement-highlights" data-aos="fade-up" data-aos-delay="600">
              <div class="highlight-item">
                <span class="highlight-number purecounter" data-purecounter-start="0" data-purecounter-end="94"
                  data-purecounter-duration="2"></span>%
                <span class="highlight-label">Success Rate</span>
              </div>
              <div class="highlight-divider"></div>
              <div class="highlight-item">
                <span class="highlight-number purecounter" data-purecounter-start="0" data-purecounter-end="1800"
                  data-purecounter-duration="2"></span>+
                <span class="highlight-label">Properties Sold</span>
              </div>
              <div class="highlight-divider"></div>
              <div class="highlight-item">
                <span class="highlight-number purecounter" data-purecounter-start="0" data-purecounter-end="24"
                  data-purecounter-duration="2"></span>/7
                <span class="highlight-label">Support Available</span>
              </div>
            </div>

            <div class="action-buttons" data-aos="fade-up" data-aos-delay="650">
              <a href="properties.html" class="btn btn-primary">Explore Properties</a>
              <a href="contact.html" class="btn btn-outline">Schedule Consultation</a>
            </div>
          </div>
        </div>

      </div>

    </div>

  </section><!-- /Why Us Section -->

  <!-- Recent Blog Posts Section -->
  <section id="recent-blog-posts" class="recent-blog-posts section">

    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
      <h2>Market Insights & News</h2>
      <p>Stay informed with the latest trends and advice from our real estate experts.</p>
    </div><!-- End Section Title -->

    <div class="container">

      <div class="row gy-5">
        {% for recent in recent_blog_posts %}
        <div class="col-xl-4 col-md-6" data-aos="fade-up" data-aos-delay="100">
          <div class="post-item position-relative h-100">

            <div class="post-img position-relative overflow-hidden">
              <img src="{% static 'assets/img/blog/blog-post-1.webp' %}" class="img-fluid" alt="">
              <span class="post-date">December 12</span>
            </div>

            <div class="post-content d-flex flex-column">
              <h3 class="post-title">{{ recent.title }}</h3>
              <a href="{{ recent.get_absolute_url }}" class="readmore stretched-link"
                aria-label="Read more about {{ recent.title }}"><span>Read More</span><i
                  class="bi bi-arrow-right"></i></a>
            </div>

          </div>
        </div><!-- End post item -->
        {% endfor %}

      </div>

    </div>

  </section><!-- /Recent Blog Posts Section -->

  <!-- Call To Action Section -->
  <section class="call-to-action-2 call-to-action section light-background" id="call-to-action">
    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="row align-items-center">
        <div class="col-lg-6 order-2 order-lg-1" data-aos="fade-right" data-aos-delay="200">

          <div class="cta-content">
            <div class="section-badge">Your Property Journey Starts Here</div>
            <h2>Ready to Find Your Perfect Investment?</h2>
            <p>Whether you're looking for your first home, a luxury estate, or a high-yield investment property, our
              team is here to guide you every step of the way.</p>

            <div class="benefits-list">
              <div class="benefit-item" data-aos="fade-up" data-aos-delay="300">
                <i class="bi bi-check-circle-fill"></i>
                <span>Expert market analysis and insights</span>
              </div>
              <div class="benefit-item" data-aos="fade-up" data-aos-delay="350">
                <i class="bi bi-check-circle-fill"></i>
                <span>Personalized property recommendations</span>
              </div>
              <div class="benefit-item" data-aos="fade-up" data-aos-delay="400">
                <i class="bi bi-check-circle-fill"></i>
                <span>End-to-end transaction support</span>
              </div>
            </div>

            <div class="cta-actions">
              <a href="contact.html" class="btn btn-primary">
                <i class="bi bi-person-lines-fill"></i>
                Get Free Consultation
              </a>
              <a href="contact.html" class="btn btn-secondary">
                <i class="bi bi-telephone-fill"></i>
                Call (555) 123-4567
              </a>
            </div>

          </div><!-- End CTA Content -->

        </div><!-- End Left Column -->

        <div class="col-lg-6 order-1 order-lg-2" data-aos="fade-left" data-aos-delay="250">

          <div class="cta-visual">
            <div class="main-image">
              <img src="{% static 'assets/img/real-estate/property-exterior-5.webp' %}" alt="Property Investment"
                class="img-fluid">
              <div class="overlay-badge">
                <i class="bi bi-star-fill"></i>
                <span>Trusted by 500+ Clients</span>
              </div>
            </div>

            <div class="floating-stats">
              <div class="stat-card" data-aos="zoom-in" data-aos-delay="450">
                <div class="stat-icon">
                  <i class="bi bi-house-heart-fill"></i>
                </div>
                <div class="stat-info">
                  <span class="stat-number">850+</span>
                  <span class="stat-label">Properties Sold</span>
                </div>
              </div>

              <div class="stat-card" data-aos="zoom-in" data-aos-delay="500">
                <div class="stat-icon">
                  <i class="bi bi-trophy-fill"></i>
                </div>
                <div class="stat-info">
                  <span class="stat-number">15</span>
                  <span class="stat-label">Years Experience</span>
                </div>
              </div>
            </div>

          </div><!-- End CTA Visual -->

        </div><!-- End Right Column -->
      </div>

    </div>
  </section><!-- /Call To Action Section -->

</main>

<script>
  // Smart City Filter - Dynamically load cities based on selected state
  document.getElementById('state-type').addEventListener('change', function () {
    const stateId = this.value;
    const citySelect = document.getElementById('cities-type');

    // Reset city dropdown
    citySelect.innerHTML = '<option value="">Loading cities...</option>';
    citySelect.disabled = true;

    if (!stateId) {
      citySelect.innerHTML = '<option value="">Select State First</option>';
      return;
    }

    // Fetch cities for selected state
    fetch(`/api/get-cities/?state_id=${stateId}`)
      .then(response => response.json())
      .then(data => {
        citySelect.innerHTML = '<option value="">Select City</option>';

        if (data.cities && data.cities.length > 0) {
          data.cities.forEach(city => {
            const option = document.createElement('option');
            option.value = city.id;
            option.textContent = city.name;
            citySelect.appendChild(option);
          });
          citySelect.disabled = false;
        } else {
          citySelect.innerHTML = '<option value="">No cities available</option>';
        }
      })
      .catch(error => {
        console.error('Error fetching cities:', error);
        citySelect.innerHTML = '<option value="">Error loading cities</option>';
      });
  });
</script>


{% endblock content %}